def calc_aqi(C, breakpoints):
    for bp in breakpoints:
        if bp["C_lo"] <= C <= bp["C_hi"]:
            return ((bp["I_hi"] - bp["I_lo"]) / (bp["C_hi"] - bp["C_lo"])) * (C - bp["C_lo"]) + bp["I_lo"]
    return None

# === Пороговые значения AQI ===
BREAKPOINTS = {
    "pm2_5": [
        {"C_lo": 0.0, "C_hi": 12.0, "I_lo": 0, "I_hi": 50},
        {"C_lo": 12.1, "C_hi": 35.4, "I_lo": 51, "I_hi": 100},
        {"C_lo": 35.5, "C_hi": 55.4, "I_lo": 101, "I_hi": 150},
        {"C_lo": 55.5, "C_hi": 150.4, "I_lo": 151, "I_hi": 200},
        {"C_lo": 150.5, "C_hi": 250.4, "I_lo": 201, "I_hi": 300},
        {"C_lo": 250.5, "C_hi": 350.4, "I_lo": 301, "I_hi": 400},
        {"C_lo": 350.5, "C_hi": 500.4, "I_lo": 401, "I_hi": 500},
    ],
    "pm10": [
        {"C_lo": 0, "C_hi": 54, "I_lo": 0, "I_hi": 50},
        {"C_lo": 55, "C_hi": 154, "I_lo": 51, "I_hi": 100},
        {"C_lo": 155, "C_hi": 254, "I_lo": 101, "I_hi": 150},
        {"C_lo": 255, "C_hi": 354, "I_lo": 151, "I_hi": 200},
        {"C_lo": 355, "C_hi": 424, "I_lo": 201, "I_hi": 300},
        {"C_lo": 425, "C_hi": 504, "I_lo": 301, "I_hi": 400},
        {"C_lo": 505, "C_hi": 604, "I_lo": 401, "I_hi": 500},
    ],
    "carbon_monoxide": [
        {"C_lo": 0.0, "C_hi": 4.4, "I_lo": 0, "I_hi": 50},
        {"C_lo": 4.5, "C_hi": 9.4, "I_lo": 51, "I_hi": 100},
        {"C_lo": 9.5, "C_hi": 12.4, "I_lo": 101, "I_hi": 150},
        {"C_lo": 12.5, "C_hi": 15.4, "I_lo": 151, "I_hi": 200},
        {"C_lo": 15.5, "C_hi": 30.4, "I_lo": 201, "I_hi": 300},
        {"C_lo": 30.5, "C_hi": 40.4, "I_lo": 301, "I_hi": 400},
        {"C_lo": 40.5, "C_hi": 50.4, "I_lo": 401, "I_hi": 500},
    ],
    "nitrogen_dioxide": [
        {"C_lo": 0, "C_hi": 53, "I_lo": 0, "I_hi": 50},
        {"C_lo": 54, "C_hi": 100, "I_lo": 51, "I_hi": 100},
        {"C_lo": 101, "C_hi": 360, "I_lo": 101, "I_hi": 150},
        {"C_lo": 361, "C_hi": 649, "I_lo": 151, "I_hi": 200},
        {"C_lo": 650, "C_hi": 1249, "I_lo": 201, "I_hi": 300},
        {"C_lo": 1250, "C_hi": 1649, "I_lo": 301, "I_hi": 400},
        {"C_lo": 1650, "C_hi": 2049, "I_lo": 401, "I_hi": 500},
    ],
    "sulphur_dioxide": [
        {"C_lo": 0, "C_hi": 35, "I_lo": 0, "I_hi": 50},
        {"C_lo": 36, "C_hi": 75, "I_lo": 51, "I_hi": 100},
        {"C_lo": 76, "C_hi": 185, "I_lo": 101, "I_hi": 150},
        {"C_lo": 186, "C_hi": 304, "I_lo": 151, "I_hi": 200},
        {"C_lo": 305, "C_hi": 604, "I_lo": 201, "I_hi": 300},
        {"C_lo": 605, "C_hi": 804, "I_lo": 301, "I_hi": 400},
        {"C_lo": 805, "C_hi": 1004, "I_lo": 401, "I_hi": 500},
    ],
    "ozone": [
        {"C_lo": 0.125, "C_hi": 0.164, "I_lo": 101, "I_hi": 150},
        {"C_lo": 0.165, "C_hi": 0.204, "I_lo": 151, "I_hi": 200},
        {"C_lo": 0.205, "C_hi": 0.404, "I_lo": 201, "I_hi": 300},
        {"C_lo": 0.405, "C_hi": 0.504, "I_lo": 301, "I_hi": 400},
        {"C_lo": 0.505, "C_hi": 0.604, "I_lo": 401, "I_hi": 500},
    ],
}